<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Moultrie Mobile ‚Äì Career Match</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <style>
    :root {
      --mm-green: #1e3d12;
      --mm-green-soft: #2d5a1a;
      --mm-green-block: #274e16;
      --mm-yellow: #e8c547;
      --mm-yellow-bright: #f5d84d;
      --mm-yellow-dark: #c9a83a;
      --mm-bg: #f6f4ee;
      --mm-bg-warm: #faf8f2;
      --mm-card: #fff;
      --mm-card-soft: #fdfcfa;
      --mm-text: #1c1c1c;
      --mm-muted: #5c5c5c;
      --mm-border: rgba(30,61,18,0.12);
      --radius: 12px;
      --radius-sm: 8px;
      --shadow: 0 2px 12px rgba(30,61,18,0.06);
      --shadow-hover: 0 8px 28px rgba(30,61,18,0.12);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--mm-text);
      background: var(--mm-bg);
      line-height: 1.5;
    }
    .site-header {
      background: var(--mm-green);
      color: white;
      padding: 0.875rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
      box-shadow: 0 2px 16px rgba(0,0,0,0.08);
    }
    .site-logo {
      font-weight: 700;
      font-size: 1.25rem;
      letter-spacing: 0.02em;
    }
    .site-logo span { color: var(--mm-yellow-bright); }
    .main-nav {
      display: flex;
      gap: 0.25rem;
      flex-wrap: wrap;
    }
    .main-nav a {
      color: rgba(255,255,255,0.92);
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 500;
      transition: background 0.2s, color 0.2s;
    }
    .main-nav a:hover {
      background: rgba(255,255,255,0.12);
      color: white;
    }
    .main-nav a.active {
      background: var(--mm-yellow-bright);
      color: var(--mm-green);
    }
    .main-nav a.active:hover {
      background: var(--mm-yellow);
      color: var(--mm-green);
    }
    main {
      max-width: 1280px;
      margin: 0 auto;
      padding: 2.5rem 2rem;
    }
    .hero {
      position: relative;
      min-height: 320px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 4rem 1.5rem;
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 2rem;
      box-shadow: var(--shadow-hover);
    }
    .hero-bg {
      position: absolute;
      inset: 0;
      background: var(--mm-green) url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=1200&q=80') center/cover no-repeat;
    }
    .hero-bg::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(30,61,18,0.82) 0%, rgba(30,61,18,0.72) 50%, rgba(30,61,18,0.88) 100%);
    }
    .hero h1, .hero p { position: relative; z-index: 1; }
    .hero h1 {
      margin: 0 0 0.75rem;
      font-size: 2.5rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      color: #fff;
      text-shadow: 0 2px 20px rgba(0,0,0,0.2);
    }
    .hero p {
      margin: 0;
      color: rgba(255,255,255,0.9);
      font-size: 1.15rem;
      font-weight: 500;
      max-width: 28em;
      text-shadow: 0 1px 8px rgba(0,0,0,0.15);
    }
    .view-section { display: none; }
    .view-section.active { display: block; }
    .option-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }
    .option-card {
      background: #e8f0e4;
      border: 3px solid var(--mm-green);
      padding: 1.25rem 1.5rem;
      border-radius: var(--radius);
      text-decoration: none;
      color: var(--mm-text);
      font-weight: 600;
      box-shadow: var(--shadow);
      transition: box-shadow 0.2s, transform 0.2s, border-color 0.2s;
    }
    .option-card:hover {
      background: #dcead8;
      box-shadow: var(--shadow-hover);
      transform: translateY(-2px);
      border-color: var(--mm-green-block);
      color: var(--mm-green);
    }
    .view-title {
      font-size: 1.2rem;
      color: var(--mm-green);
      margin: 0 0 0.75rem;
      font-weight: 700;
      letter-spacing: -0.01em;
    }
    #employee .employee-section-header {
      margin-bottom: 1.25rem;
    }
    #employee .employee-section-title {
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--mm-green);
      margin: 0 0 0.5rem;
    }
    #employee .employee-section-tagline {
      font-size: 1rem;
      color: var(--mm-muted);
      margin: 0;
      line-height: 1.5;
    }
    #employee .employee-section-intro {
      margin-bottom: 1.5rem;
      padding: 1.25rem 1.5rem;
      background: var(--mm-card);
      border: 1px solid var(--mm-border);
      border-radius: var(--radius);
      font-size: 1rem;
      line-height: 1.65;
      color: var(--mm-text);
    }
    #employee .option-grid {
      gap: 1.25rem;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    }
    #employee .option-card {
      padding: 2rem 1.75rem;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      border: 3px solid var(--mm-green);
      background: #e8f0e4;
      box-shadow: var(--shadow);
    }
    #employee .option-card:hover {
      border-color: var(--mm-green-block);
      background: #dcead8;
      box-shadow: var(--shadow-hover);
      transform: translateY(-2px);
    }
    .employer-placeholder {
      background: var(--mm-card-soft);
      border: 1px solid var(--mm-border);
      padding: 2rem;
      border-radius: var(--radius);
      color: var(--mm-muted);
      box-shadow: var(--shadow);
    }
    .intro { margin-top: 0; }
    .intro p { margin: 0 0 1rem; line-height: 1.65; color: var(--mm-text); }
    .intro p:last-child { margin-bottom: 0; }
    .intro-lead { font-size: 1.1rem; font-weight: 500; }
    .intro-blocks {
      display: grid;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    .intro-block {
      background: var(--mm-card);
      border: 1px solid var(--mm-border);
      padding: 1.5rem 1.75rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .intro-block h3 {
      margin: 0 0 0.5rem;
      font-size: 1rem;
      color: var(--mm-green);
      font-weight: 700;
    }
    .intro-block p { margin: 0; font-size: 0.95rem; color: var(--mm-muted); }
    .intro-cta {
      margin-top: 1.75rem;
      padding: 1.125rem 1.5rem;
      background: var(--mm-green);
      color: var(--mm-yellow-bright);
      font-weight: 700;
      text-align: center;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: none;
    }
    .intro-cta,
    .intro-cta * { color: var(--mm-yellow-bright) !important; }
    .nature-strip {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0;
      margin: 2rem 0;
      overflow: hidden;
      border-radius: var(--radius);
      box-shadow: var(--shadow-hover);
    }
    .nature-strip img {
      width: 100%;
      height: 340px;
      object-fit: cover;
      object-position: center;
      display: block;
    }
    .intro .warm { font-size: 1.05rem; line-height: 1.7; color: var(--mm-text); }
    .back-link {
      display: inline-block;
      margin-bottom: 1rem;
      color: var(--mm-green);
      font-weight: 600;
      text-decoration: none;
      font-size: 0.95rem;
    }
    .back-link:hover { color: var(--mm-green-block); text-decoration: underline; }
    /* Personalized Questions */
    .personalized-section {
      margin-top: 2.5rem;
      padding-top: 2rem;
      border-top: 3px solid var(--mm-green);
    }
    .personalized-section h3 {
      color: var(--mm-green);
      font-size: 1.2rem;
      margin: 0 0 1.5rem;
      font-weight: 800;
    }
    .question-block {
      background: var(--mm-card);
      border: 3px solid var(--mm-green);
      padding: 1.25rem 1.5rem;
      margin-bottom: 1.25rem;
    }
    .question-block label {
      display: block;
      font-weight: 700;
      color: var(--mm-text);
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }
    .question-block .hint {
      font-size: 0.85rem;
      color: var(--mm-muted);
      font-weight: 400;
      margin-bottom: 0.5rem;
    }
    .question-block input[type="text"],
    .question-block input[type="email"],
    .question-block select,
    .question-block textarea {
      width: 100%;
      padding: 0.6rem 0.75rem;
      border: 2px solid var(--mm-green);
      font-family: inherit;
      font-size: 1rem;
      background: var(--mm-bg);
    }
    .question-block textarea {
      min-height: 100px;
      resize: vertical;
    }
    .question-block input:focus,
    .question-block select:focus,
    .question-block textarea:focus {
      outline: none;
      border-color: var(--mm-yellow-dark);
      box-shadow: 0 0 0 2px var(--mm-yellow);
    }
    .choice-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem 1.5rem;
      margin-top: 0.5rem;
    }
    .choice-row label {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      margin-bottom: 0;
      font-weight: 600;
      cursor: pointer;
    }
    .choice-row input[type="checkbox"],
    .choice-row input[type="radio"] {
      width: 1.1em;
      height: 1.1em;
      accent-color: var(--mm-green);
      flex-shrink: 0;
      cursor: pointer;
    }
    .choice-row.sector-chips label {
      padding: 0.5rem 1rem;
      border: 2px solid var(--mm-green);
      border-radius: var(--radius-sm);
      transition: background 0.2s, color 0.2s;
    }
    .choice-row.sector-chips label:has(input:checked) {
      background: var(--mm-green);
      color: var(--mm-yellow-bright);
    }
    .choice-row.sector-chips label:hover {
      background: #e8f0e4;
    }
    .choice-row.sector-chips label:has(input:checked):hover {
      background: var(--mm-green-block);
    }
    .role-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.25rem;
      margin: 1.5rem 0;
    }
    .role-card {
      display: block;
      background: #e8f0e4;
      border: 3px solid var(--mm-green);
      padding: 1.25rem 1.5rem;
      text-decoration: none;
      color: var(--mm-text);
      font-weight: 600;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: box-shadow 0.2s, transform 0.2s, border-color 0.2s;
    }
    .role-card h2 {
      margin: 0 0 0.4rem;
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--mm-green);
    }
    .role-card p {
      margin: 0;
      font-size: 0.95rem;
      color: var(--mm-muted);
    }
    .role-card:hover {
      background: #dcead8;
      box-shadow: var(--shadow-hover);
      transform: translateY(-2px);
      border-color: var(--mm-green-block);
      color: var(--mm-green);
    }
    .role-card:hover h2 { color: var(--mm-green-block); }

    /* Chatbot */
    .chat-toggle {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      width: 3.25rem;
      height: 3.25rem;
      border-radius: 50%;
      background: var(--mm-green);
      color: var(--mm-yellow-bright);
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-hover);
      z-index: 1000;
      border: none;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .chat-toggle:hover {
      transform: scale(1.06);
      box-shadow: 0 10px 32px rgba(30,61,18,0.2);
    }
    .chat-panel {
      display: none;
      position: fixed;
      bottom: 5rem;
      right: 1.5rem;
      width: 340px;
      max-width: calc(100vw - 3rem);
      height: 440px;
      background: var(--mm-card);
      border: 1px solid var(--mm-border);
      border-radius: var(--radius);
      flex-direction: column;
      z-index: 1001;
      box-shadow: var(--shadow-hover);
    }
    .chat-panel.open { display: flex; }
    .chat-header {
      padding: 0.875rem 1.25rem;
      background: var(--mm-green);
      color: var(--mm-yellow-bright);
      font-weight: 600;
      font-size: 0.95rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: var(--radius) var(--radius) 0 0;
    }
    .chat-close {
      background: none;
      border: none;
      color: var(--mm-yellow-bright);
      font-size: 1.25rem;
      cursor: pointer;
      padding: 0 0.25rem;
      line-height: 1;
      opacity: 0.9;
    }
    .chat-close:hover { opacity: 1; }
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .chat-msg {
      max-width: 85%;
      padding: 0.65rem 1rem;
      font-size: 0.9rem;
      line-height: 1.45;
      border-radius: var(--radius-sm);
    }
    .chat-msg.bot {
      align-self: flex-start;
      background: var(--mm-bg-warm);
      border: 1px solid var(--mm-border);
      color: var(--mm-text);
    }
    .chat-msg.user {
      align-self: flex-end;
      background: var(--mm-green);
      color: var(--mm-yellow-bright);
    }
    .chat-input-wrap {
      padding: 0.875rem;
      border-top: 1px solid var(--mm-border);
      display: flex;
      gap: 0.5rem;
    }
    .chat-input-wrap input {
      flex: 1;
      padding: 0.6rem 0.9rem;
      border: 1px solid var(--mm-border);
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      font-family: inherit;
    }
    .chat-input-wrap input:focus {
      outline: none;
      border-color: var(--mm-green-soft);
      box-shadow: 0 0 0 2px rgba(45,90,26,0.15);
    }
    .chat-input-wrap button {
      padding: 0.6rem 1rem;
      background: #e8f0e4;
      color: var(--mm-green);
      border: 2px solid var(--mm-green);
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      font-family: inherit;
      transition: background 0.2s;
    }
    .chat-input-wrap button:hover { background: #dcead8; }

    .upload-resume-block { border-radius: var(--radius); }
    .upload-resume-btn {
      padding: 0.75rem 1.5rem;
      background: #e8f0e4;
      color: var(--mm-green);
      border: 3px solid var(--mm-green);
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      font-family: inherit;
      box-shadow: var(--shadow);
      transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    }
    .upload-resume-btn:hover {
      background: #dcead8;
      transform: translateY(-1px);
      box-shadow: var(--shadow-hover);
    }

    /* Upload Resume section */
    #upload-resume .intro { margin-bottom: 1.5rem; }
    #upload-resume .upload-resume-block {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      padding: 2rem 1.75rem;
    }
    .match-by-box {
      padding: 1.25rem 1.5rem;
      background: rgba(35, 67, 23, 0.06);
      border: 2px dashed var(--mm-green);
      border-radius: 8px;
    }
    .match-by-box h3 {
      margin: 0 0 0.75rem;
      font-size: 1rem;
      color: var(--mm-green);
      font-weight: 800;
    }
    .match-by-options {
      display: flex;
      gap: 1.5rem;
      flex-wrap: wrap;
      margin-bottom: 0.5rem;
    }
    .match-by-options label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      font-weight: 600;
      color: var(--mm-text);
    }
    .match-by-options input[type="radio"] {
      width: 1.1em;
      height: 1.1em;
      accent-color: var(--mm-green);
    }
    .personalized-submit {
      margin-top: 1.5rem;
      padding: 0.9rem 1.5rem;
      background: var(--mm-green);
      color: var(--mm-yellow);
      border: none;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      font-family: inherit;
    }
    .personalized-submit:hover {
      background: var(--mm-green-block);
    }
    .match-by-box p {
      margin: 0.5rem 0 0;
      font-size: 0.85rem;
      color: var(--mm-muted);
      line-height: 1.5;
    }
    .upload-zone {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 160px;
      padding: 2rem;
      background: var(--mm-bg);
      border: 2px dashed var(--mm-green);
      border-radius: 8px;
      transition: background 0.2s, border-color 0.2s;
    }
    .upload-zone:hover, .upload-zone:focus-within {
      background: rgba(35, 67, 23, 0.05);
      border-color: var(--mm-green-block);
    }
    .upload-resume-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.9rem 1.75rem;
      background: var(--mm-green);
      color: var(--mm-yellow);
      border: none;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      border-radius: 8px;
      transition: background 0.2s, transform 0.1s;
      font-family: inherit;
    }
    .upload-resume-btn:hover {
      background: var(--mm-green-block);
      transform: translateY(-1px);
    }
    .upload-zone .upload-hint {
      margin-top: 0.75rem;
      font-size: 0.9rem;
      color: var(--mm-muted);
    }
    .resume-file-name {
      margin: 0.75rem 0 0;
      font-size: 0.9rem;
      color: var(--mm-green);
      font-weight: 600;
    }
    .resume-file-name:empty { display: none; }
    .resume-scan-status {
      margin-top: 0.5rem;
      font-size: 0.95rem;
      color: var(--mm-muted);
      min-height: 1.5em;
    }
    .resume-scan-results {
      margin-top: 1rem;
      padding: 1.25rem;
      background: rgba(35, 67, 23, 0.05);
      border-radius: 8px;
      border: 1px solid rgba(35, 67, 23, 0.2);
    }
    .resume-scan-results h3 {
      margin: 0 0 0.75rem;
      font-size: 1rem;
      color: var(--mm-green);
      font-weight: 800;
    }
    .resume-section-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 0.5rem;
    }
    .resume-section-list li {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
    }
    .resume-section-list li .section-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .resume-section-list li.found .section-dot { background: var(--mm-green); }
    .resume-section-list li.missing .section-dot { background: var(--mm-muted); opacity: 0.6; }
    .job-matches-wrap {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 2px solid var(--mm-green);
    }
    .job-matches-wrap h3 {
      margin: 0 0 1rem;
      font-size: 1.1rem;
      color: var(--mm-green);
      font-weight: 800;
    }
    .job-matches-list {
      list-style: none;
      margin: 0 0 1.25rem 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .job-matches-list:last-of-type { margin-bottom: 0; }
    .job-matches-list li {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.5rem 1rem;
      padding: 0.85rem 1rem;
      background: var(--mm-bg);
      border: 1px solid rgba(35, 67, 23, 0.2);
      border-radius: 8px;
    }
    .job-matches-list li .job-title-link {
      color: var(--mm-green);
      font-weight: 700;
      text-decoration: none;
      flex: 1 1 auto;
    }
    .job-matches-list li .job-title-link:hover { text-decoration: underline; }
    .job-matches-list li .job-pct {
      font-size: 0.9rem;
      font-weight: 700;
      color: var(--mm-green);
    }
    .job-matches-list li .job-like-btn {
      padding: 0.35rem 0.65rem;
      font-size: 0.85rem;
      font-weight: 600;
      border: 2px solid var(--mm-green);
      background: transparent;
      color: var(--mm-green);
      border-radius: 6px;
      cursor: pointer;
      font-family: inherit;
    }
    .job-matches-list li .job-like-btn:hover { background: rgba(35, 67, 23, 0.1); }
    .job-matches-list li .job-like-btn.liked {
      background: var(--mm-green);
      color: var(--mm-yellow);
    }
    .job-matches-list li .job-meta {
      width: 100%;
      font-size: 0.85rem;
      color: var(--mm-muted);
      margin-top: 0.15rem;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="site-logo">Moultrie <span>Mobile</span></div>
    <nav class="main-nav">
      <a href="about.html">About</a>
      <a href="#home" data-view="home">Home</a>
      <a href="#employee" data-view="employee">Prospective employee</a>
      <a href="#employer" data-view="employer">Employer</a>
    </nav>
  </header>
  <main>
    <section class="hero">
      <div class="hero-bg" aria-hidden="true"></div>
      <h1>Career Match</h1>
      <p>Internal career assistant for Moultrie Mobile employees and hiring managers.</p>
    </section>

    <section id="home" class="view-section active">
      <div class="intro">
        <p class="intro-lead warm">Welcome. This is Moultrie Mobile‚Äôs internal AI career dashboard, designed for employees and hiring managers ‚Äî not the public web.</p>

        <div class="role-selector">
          <a href="#employee" class="role-card">
            <h2>I‚Äôm a prospective employee</h2>
            <p>Get job matches, training suggestions, and a clear view of why each role fits you.</p>
          </a>
          <a href="#employer" class="role-card">
            <h2>I‚Äôm an employer</h2>
            <p>Review candidates, understand AI match scores, and explore internal talent.</p>
          </a>
        </div>

        <p class="intro-lead warm">This isn‚Äôt a faceless form ‚Äî it‚Äôs an AI that‚Äôs on your side. We want to help you find a role at Moultrie Mobile that actually fits <em>you</em>: your skills, how you like to work, and what you care about.</p>

        <div class="nature-strip">
          <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&q=80" alt="Forest path" />
          <img src="images/antler-shadow.png" alt="Antler shadow on rustic metal" />
          <img src="https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=400&q=80" alt="Misty forest" />
        </div>

        <p class="warm">We care about <strong>transparency</strong> and <strong>authenticity</strong>. No hidden scoring, no bias ‚Äî we listen to what you share and match you honestly. Upload your resume and answer a few human-centered questions. Then you get to choose: should we lean more on your experience and hard skills, or more on the human stuff ‚Äî how you work, what you value, the kind of team you want? Your call.</p>
        <p class="warm">Every suggestion we make comes with a clear, visual breakdown so you see exactly why we recommended it. No black box. And <strong>your privacy is non-negotiable</strong>: by default we don‚Äôt keep your data. When you leave, we forget it. If you want to save your progress, you can choose to keep it.</p>

        <div class="intro-blocks">
          <div class="intro-block">
            <h3>How it works</h3>
            <p>Upload a resume, answer a few questions, and choose whether matches lean toward skills or fit. We‚Äôll show you roles and explain every decision ‚Äî in plain language.</p>
          </div>
          <div class="intro-block">
            <h3>You‚Äôre in control</h3>
            <p>Pick Prospective employee or Employer above whenever you‚Äôre ready. No pressure. We‚Äôre here.</p>
          </div>
        </div>

        <p class="intro-cta">Choose <strong>Prospective employee</strong> or <strong>Employer</strong> above when you‚Äôre ready to start.</p>
      </div>
    </section>

    <section id="employee" class="view-section">
      <div class="employee-section-header">
        <h2 class="employee-section-title">Prospective employee</h2>
        <p class="employee-section-tagline">Your path to the right role ‚Äî explore tools and see how we match you.</p>
      </div>
      <p class="employee-section-intro">
        Here you can upload your resume, answer personalized questions, and see job matches tailored to you. Use the options below to get started: answer questions so we understand your preferences, upload your resume to match against open roles, explore training suggestions, view your top job recommendations, or see exactly how our AI weighed each match. You can also save jobs you like for later.
      </p>
      <div class="option-grid">
        <a href="#personalized-questions" class="option-card">Personalized Questions</a>
        <a href="#upload-resume" class="option-card">Upload Resume</a>
        <a href="#training-match" class="option-card">Training & Courses Match</a>
        <a href="ai-breakdown.html" class="option-card">AI Decision Breakdown</a>
        <a href="liked-jobs.html" class="option-card">Liked jobs</a>
      </div>
    </section>

    <section id="upload-resume" class="view-section">
      <h2 class="view-title">Upload Resume to Find Next Job</h2>
      <div class="intro">
        <p class="intro-lead">Upload your resume (PDF, Word, or plain text). Our AI will scan it for key sections so we can match you to the right roles.</p>
      </div>
      <div class="upload-resume-block intro-block">
        <div class="match-by-box">
          <h3>Match by</h3>
          <div class="match-by-options" role="radiogroup" aria-label="Match by experience or interests">
            <label><input type="radio" name="match-by" value="experience" checked /> Experience</label>
            <label><input type="radio" name="match-by" value="interests" /> Interests</label>
          </div>
          <p>Experience uses your skills and qualifications. Interests uses your activities, leadership, and what you care about.</p>
        </div>
        <p class="upload-bias-note" style="margin:0;color:var(--mm-muted);font-size:0.9rem;line-height:1.55;">
          <strong>Bias-free resume reviewer:</strong> we focus on skills and experience only. We do not use school, graduation year, age, name, location, race, gender, or other personal details to score your matches.
        </p>
        <div class="upload-zone">
          <input type="file" id="resume-file" accept=".pdf,.docx,.doc,.txt" hidden />
          <button type="button" id="upload-resume-btn" class="upload-resume-btn">Choose resume file</button>
          <p class="upload-hint">PDF, Word (.docx, .doc), or plain text</p>
        </div>
        <p id="resume-file-name" class="resume-file-name"></p>
        <div id="resume-scan-status" class="resume-scan-status" aria-live="polite"></div>
        <div id="resume-scan-results" class="resume-scan-results" hidden></div>
        <div id="resume-job-matches" class="job-matches-wrap" hidden></div>
      </div>
    </section>

    <section id="personalized-questions" class="view-section">
      <a href="#employee" class="back-link">‚Üê Back to options</a>
      <h2 class="view-title">Personalized Questions</h2>
      <p class="intro" style="margin-bottom: 1.5rem;">Help us match you with the right roles. Your answers stay private and shape your recommendations.</p>

      <form id="personalized-form" class="personalized-form">
          <div class="question-block">
            <label>What sectors are you interested in?</label>
            <span class="hint">Select all that apply ‚Äî click to toggle multiple</span>
            <div class="choice-row sector-chips" role="group" aria-label="Sectors (multi-select)">
              <label><input type="checkbox" name="sectors" value="tech"> Tech & IT</label>
              <label><input type="checkbox" name="sectors" value="operations"> Operations</label>
              <label><input type="checkbox" name="sectors" value="hr"> HR & People</label>
              <label><input type="checkbox" name="sectors" value="finance"> Finance</label>
              <label><input type="checkbox" name="sectors" value="sales"> Sales & Marketing</label>
              <label><input type="checkbox" name="sectors" value="engineering"> Engineering</label>
              <label><input type="checkbox" name="sectors" value="other-sector"> Other</label>
            </div>
            <input type="text" name="sectors-other" placeholder="Other sector(s)" style="margin-top: 0.75rem;" aria-label="Other sectors">
          </div>

          <div class="question-block">
            <label>What type of job?</label>
            <span class="hint">How do you prefer to work?</span>
            <div class="choice-row">
              <label><input type="radio" name="work-mode" value="remote"> Remote</label>
              <label><input type="radio" name="work-mode" value="in-person"> In person</label>
              <label><input type="radio" name="work-mode" value="hybrid"> Hybrid</label>
            </div>
          </div>

          <div class="question-block">
            <label>Personality & work style</label>
            <span class="hint">Select all that apply ‚Äî click to toggle multiple</span>
            <div class="choice-row sector-chips" role="group" aria-label="Personality and work style (multi-select)">
              <label><input type="checkbox" name="traits" value="introvert"> Introvert</label>
              <label><input type="checkbox" name="traits" value="extrovert"> Extrovert</label>
              <label><input type="checkbox" name="traits" value="workaholic"> Workaholic</label>
              <label><input type="checkbox" name="traits" value="balanced"> Balanced boundaries</label>
              <label><input type="checkbox" name="traits" value="collaborative"> Collaborative</label>
              <label><input type="checkbox" name="traits" value="independent"> Independent</label>
              <label><input type="checkbox" name="traits" value="structured"> Structured / process-driven</label>
              <label><input type="checkbox" name="traits" value="adaptive"> Adaptive / flexible</label>
            </div>
            <input type="text" name="traits-other" placeholder="Other traits (e.g. morning person, night owl)" style="margin-top: 0.75rem;" aria-label="Other personality traits">
          </div>

          <div class="question-block">
            <label>Preferred role type</label>
            <span class="hint">Individual contributor vs. people leadership</span>
            <div class="choice-row">
              <label><input type="checkbox" name="role-type" value="ic"> Individual contributor</label>
              <label><input type="checkbox" name="role-type" value="lead"> Team lead</label>
              <label><input type="checkbox" name="role-type" value="manager"> Manager</label>
              <label><input type="checkbox" name="role-type" value="director"> Director / Executive</label>
            </div>
          </div>

          <div class="question-block">
            <label>Employment type</label>
            <span class="hint">What are you looking for?</span>
            <div class="choice-row">
              <label><input type="radio" name="employment-type" value="fulltime"> Full-time</label>
              <label><input type="radio" name="employment-type" value="parttime"> Part-time</label>
              <label><input type="radio" name="employment-type" value="contract"> Contract / Freelance</label>
              <label><input type="radio" name="employment-type" value="flexible"> Flexible / open</label>
            </div>
          </div>

          <div class="question-block">
            <label>When can you start?</label>
            <span class="hint">Earliest start date</span>
            <div class="choice-row">
              <label><input type="radio" name="start-date" value="immediate"> Immediately</label>
              <label><input type="radio" name="start-date" value="2weeks"> Within 2 weeks</label>
              <label><input type="radio" name="start-date" value="1month"> Within 1 month</label>
              <label><input type="radio" name="start-date" value="2months"> 2+ months</label>
            </div>
          </div>

          <div class="question-block">
            <label>What matters most to you?</label>
            <span class="hint">Select your top priorities (we use this to rank fit)</span>
            <div class="choice-row">
              <label><input type="checkbox" name="priorities" value="salary"> Salary & compensation</label>
              <label><input type="checkbox" name="priorities" value="benefits"> Benefits (health, 401k, etc.)</label>
              <label><input type="checkbox" name="priorities" value="worklife"> Work-life balance</label>
              <label><input type="checkbox" name="priorities" value="growth"> Growth & learning</label>
              <label><input type="checkbox" name="priorities" value="culture"> Company culture</label>
              <label><input type="checkbox" name="priorities" value="flexibility"> Flexibility (schedule, location)</label>
            </div>
          </div>

          <div class="question-block">
            <label>Team size preference</label>
            <span class="hint">Environment you thrive in</span>
            <div class="choice-row">
              <label><input type="radio" name="team-size" value="small"> Small (&lt;10)</label>
              <label><input type="radio" name="team-size" value="mid"> Mid-size (10‚Äì50)</label>
              <label><input type="radio" name="team-size" value="large"> Large (50+)</label>
              <label><input type="radio" name="team-size" value="nopref"> No preference</label>
            </div>
          </div>

          <div class="question-block">
            <label>Willing to relocate?</label>
            <span class="hint">For roles that require or prefer on-site</span>
            <div class="choice-row">
              <label><input type="radio" name="relocate" value="yes"> Yes</label>
              <label><input type="radio" name="relocate" value="no"> No</label>
              <label><input type="radio" name="relocate" value="prefer-not"> Prefer not to say</label>
            </div>
          </div>

          <div class="question-block">
            <label for="anything-else">Anything else we should know?</label>
            <span class="hint">Goals, constraints, preferences, or what matters most to you</span>
            <textarea id="anything-else" name="anything_else" placeholder="e.g. career goals, schedule needs, must-haves in a team..."></textarea>
          </div>

          <button type="submit" class="personalized-submit">Save my answers</button>
        </form>
    </section>

    <section id="employer" class="view-section">
      <h2 class="view-title">Employer</h2>
      <div class="employer-placeholder">
        This area is for hiring managers. You can open the dedicated employer dashboard to see candidates
        who have explicitly chosen to make their profiles visible.
        <div style="margin-top:1rem;">
          <a href="employer-dashboard.html" class="option-card" style="display:inline-block;">Open employer dashboard</a>
        </div>
      </div>
    </section>
  </main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script>if (typeof pdfjsLib !== 'undefined') { pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js'; }</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
  <button type="button" class="chat-toggle" id="chat-toggle" aria-label="Open chat" title="Chat">üí¨</button>
  <div class="chat-panel" id="chat-panel" role="dialog" aria-label="Chat">
    <div class="chat-header">
      <span>Hi! I'm here if you have questions.</span>
      <button type="button" class="chat-close" id="chat-close" aria-label="Close chat">&times;</button>
    </div>
    <div class="chat-messages" id="chat-messages"></div>
    <div class="chat-input-wrap">
      <input type="text" id="chat-input" placeholder="Ask me anything..." autocomplete="off" />
      <button type="button" id="chat-send">Send</button>
    </div>
  </div>
  <script>
    const EMPLOYEE_SUB_ANCHORS = ['personalized-questions', 'upload-resume', 'training-match', 'job-dashboard'];
    function setView() {
      const hash = location.hash.slice(1) || 'home';
      let activeView;
      if (hash === 'personalized-questions') {
        activeView = 'personalized-questions';
      } else if (hash === 'upload-resume') {
        activeView = 'upload-resume';
      } else if (EMPLOYEE_SUB_ANCHORS.includes(hash)) {
        activeView = 'employee';
      } else if (hash === 'employer' || hash === 'home' || hash === 'employee') {
        activeView = hash;
      } else {
        activeView = 'home';
      }
      document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.main-nav a').forEach(a => a.classList.remove('active'));
      const section = document.getElementById(activeView);
      const link = document.querySelector(`.main-nav a[data-view="${activeView}"]`) || (activeView === 'upload-resume' || activeView === 'personalized-questions' ? document.querySelector('.main-nav a[data-view="employee"]') : null);
      if (section) section.classList.add('active');
      if (link) link.classList.add('active');
      if (EMPLOYEE_SUB_ANCHORS.includes(hash)) {
        setTimeout(function() {
          const el = document.getElementById(hash);
          if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 50);
      }
    }
    window.addEventListener('hashchange', setView);
    window.addEventListener('load', setView);

    (function likedJobs() {
      var LIKED_KEY = 'moultrie_liked_jobs';
      function getLikedJobs() {
        try { return JSON.parse(localStorage.getItem(LIKED_KEY) || '[]'); }
        catch (e) { return []; }
      }
      function setLikedJobs(arr) { try { localStorage.setItem(LIKED_KEY, JSON.stringify(arr)); } catch (e) {} }
      function jobKey(j) { return (j.title || '') + '|' + (j.department || '') + '|' + (j.location || ''); }
      function isJobLiked(j) {
        var key = jobKey(j);
        return getLikedJobs().some(function (l) { return jobKey(l) === key; });
      }
      window.toggleJobLike = function (j) {
        var list = getLikedJobs();
        var key = jobKey(j);
        var idx = -1;
        for (var i = 0; i < list.length; i++) { if (jobKey(list[i]) === key) { idx = i; break; } }
        if (idx >= 0) list.splice(idx, 1);
        else list.push({ title: j.title, department: j.department, location: j.location });
        setLikedJobs(list);
        if (window.refreshJobMatches) window.refreshJobMatches();
      };
      window.getLikedJobs = getLikedJobs;
      window.isJobLiked = isJobLiked;
    })();

    (function resumeUpload() {
      var fileInput = document.getElementById('resume-file');
      var uploadBtn = document.getElementById('upload-resume-btn');
      var fileNameEl = document.getElementById('resume-file-name');
      var statusEl = document.getElementById('resume-scan-status');
      var resultsEl = document.getElementById('resume-scan-results');
      var jobMatchesEl = document.getElementById('resume-job-matches');
      var lastResumeText = null;

      if (!fileInput || !uploadBtn || !fileNameEl || !statusEl || !resultsEl || !jobMatchesEl) return;

      function getMatchBy() {
        var r = document.querySelector('input[name="match-by"]:checked');
        return (r && r.value) || 'experience';
      }

      function refreshJobMatches() {
        if (!lastResumeText) return;
        var matches = computeJobMatches(lastResumeText, getMatchBy());
        renderJobMatches(jobMatchesEl, matches);
        var all = (matches.best || []).concat(matches.other || []);
        var top3 = all.slice(0, 3).map(function (j) {
          return { id: j.id, title: j.title, department: j.department, location: j.location, matchPct: j.matchPct };
        });
        try { sessionStorage.setItem('mmJobMatches', JSON.stringify(top3)); } catch (e) {}
      }
      window.refreshJobMatches = refreshJobMatches;

      uploadBtn.addEventListener('click', function () { fileInput.click(); });
      document.querySelectorAll('input[name="match-by"]').forEach(function (radio) {
        radio.addEventListener('change', refreshJobMatches);
      });

      fileInput.addEventListener('change', function () {
        var file = fileInput.files && fileInput.files[0];
        if (!file) return;
        fileNameEl.textContent = 'File: ' + file.name;
        statusEl.textContent = 'Scanning resume‚Ä¶';
        resultsEl.hidden = true;
        jobMatchesEl.hidden = true;

        readResumeText(file).then(function (text) {
          if (!text || !text.trim()) {
            statusEl.textContent = 'Could not extract text from this file. Try a PDF or Word document.';
            return;
          }
          lastResumeText = text;
          try { sessionStorage.setItem('mmResumeText', text); } catch (e) {}

          var found = scanResumeSections(text);
          statusEl.textContent = 'Scan complete. Key sections detected:';
          renderScanResults(resultsEl, found);
          resultsEl.hidden = false;

          refreshJobMatches();
          jobMatchesEl.hidden = false;
        }).catch(function (err) {
          statusEl.textContent = 'Error: ' + (err && err.message ? err.message : 'Could not read file.');
        });
      });

      function readResumeText(file) {
        var name = (file.name || '').toLowerCase();
        if (name.endsWith('.txt')) {
          return new Promise(function (resolve, reject) {
            var r = new FileReader();
            r.onload = function () { resolve(r.result || ''); };
            r.onerror = function () { reject(new Error('Failed to read file')); };
            r.readAsText(file);
          });
        }
        if (name.endsWith('.pdf')) {
          return file.arrayBuffer().then(function (buf) {
            if (typeof pdfjsLib === 'undefined') return Promise.reject(new Error('PDF library not loaded'));
            return pdfjsLib.getDocument(buf).promise.then(function (pdf) {
              var pages = [];
              for (var i = 1; i <= pdf.numPages; i++) {
                pages.push(pdf.getPage(i).then(function (p) { return p.getTextContent(); }).then(function (c) {
                  return c.items.map(function (it) { return it.str || ''; }).join(' ');
                }));
              }
              return Promise.all(pages).then(function (arr) { return arr.join('\n'); });
            });
          });
        }
        if (name.endsWith('.docx') || name.endsWith('.doc')) {
          return file.arrayBuffer().then(function (buf) {
            if (typeof mammoth === 'undefined') return Promise.reject(new Error('Word library not loaded'));
            return mammoth.extractRawText({ arrayBuffer: buf }).then(function (r) { return r.value; });
          });
        }
        return Promise.reject(new Error('Unsupported format. Use .pdf, .docx, or .txt'));
      }

      var SECTION_DEFS = [
        { id: 'experience', label: 'Job experience', keywords: ['work experience', 'employment', 'professional experience', 'experience', 'career', 'job history', 'employment history', 'work history'] },
        { id: 'projects', label: 'Projects', keywords: ['projects', 'project experience', 'selected projects', 'project work', 'notable projects'] },
        { id: 'leadership', label: 'Leadership', keywords: ['leadership', 'management', 'supervisory', 'team lead', 'manager', 'supervised'] },
        { id: 'activities', label: 'Activities', keywords: ['activities', 'extracurricular', 'volunteer', 'volunteering', 'community', 'clubs', 'organizations'] }
      ];

      var MOULTRIE_JOBS = [
        { title: 'Field Operations Coordinator', department: 'Operations', location: 'Moultrie, GA', skills: ['field operations', 'logistics', 'scheduling', 'coordination', 'inventory', 'documentation', 'safety compliance'], qualifications: ['organization', 'communication', 'problem solving', 'experience in operations', 'teamwork', 'detail oriented'], interests: ['organization', 'hands-on', 'logistics', 'safety', 'procedures', 'teamwork', 'outdoors', 'structure'] },
        { title: 'Customer Success Representative', department: 'Customer Success', location: 'Hybrid', skills: ['customer service', 'customer support', 'phone', 'email', 'CRM', 'troubleshooting', 'onboarding'], qualifications: ['communication', 'empathy', 'problem solving', 'experience with customers', 'listening', 'patience'], interests: ['helping people', 'customer focus', 'listening', 'problem solving', 'teaching', 'relationship building'] },
        { title: 'Technical Project Lead', department: 'Product & Technology', location: 'Remote', skills: ['project management', 'agile', 'scrum', 'technical', 'software', 'development', 'stakeholder', 'timeline', 'budget'], qualifications: ['leadership', 'experience leading projects', 'cross-functional', 'communication', 'organization', 'problem solving'], interests: ['technology', 'leading teams', 'building products', 'strategy', 'collaboration', 'problem solving'] },
        { title: 'HR & Training Specialist', department: 'Human Resources', location: 'Moultrie, GA', skills: ['training', 'onboarding', 'recruiting', 'HR', 'human resources', 'policies', 'orientation', 'development programs'], qualifications: ['communication', 'organization', 'experience in HR', 'facilitation', 'interpersonal', 'confidentiality'], interests: ['teaching', 'helping people grow', 'organization', 'people', 'development', 'culture'] },
        { title: 'Sales & Outreach Associate', department: 'Sales', location: 'Hybrid', skills: ['sales', 'outreach', 'lead generation', 'client', 'pipeline', 'negotiation', 'presentation', 'relationship'], qualifications: ['communication', 'persuasion', 'goal oriented', 'experience in sales', 'networking', 'self motivated'], interests: ['meeting people', 'persuasion', 'goals', 'networking', 'relationship building', 'growth'] },
        { title: 'Operations Manager', department: 'Operations', location: 'On-site', skills: ['operations', 'management', 'process improvement', 'budget', 'planning', 'team leadership', 'KPIs', 'efficiency'], qualifications: ['leadership', 'experience managing', 'analytical', 'decision making', 'organization', 'supervisory'], interests: ['leading', 'efficiency', 'improvement', 'decision making', 'team leadership', 'results'] },
        { title: 'Junior Developer', department: 'Product & Technology', location: 'Remote', skills: ['programming', 'coding', 'software development', 'javascript', 'python', 'web', 'API', 'git', 'debugging'], qualifications: ['problem solving', 'projects', 'computer science', 'technical', 'learning', 'collaboration', 'code'], interests: ['technology', 'building things', 'problem solving', 'learning', 'coding', 'projects', 'creativity'] },
        { title: 'Community Engagement Coordinator', department: 'Community', location: 'Moultrie, GA', skills: ['community', 'engagement', 'outreach', 'events', 'volunteer', 'partnerships', 'social', 'programs'], qualifications: ['communication', 'organization', 'volunteer experience', 'leadership', 'involvement', 'relationship building'], interests: ['community', 'volunteer', 'events', 'helping others', 'partnerships', 'social impact', 'involvement'] }
      ];

      function computeJobMatches(resumeText, matchMode) {
        var normalizedResume = '\n' + (resumeText || '').replace(/\r\n/g, '\n').replace(/\r/g, '\n').toLowerCase();
        var scored = MOULTRIE_JOBS.map(function (job, idx) {
          var allCriteria = matchMode === 'interests' ? (job.interests || []) : (job.skills || []).concat(job.qualifications || []);
          if (allCriteria.length === 0) return { id: idx + 1, title: job.title, department: job.department, location: job.location, matchPct: 0 };
          var matched = 0;
          for (var i = 0; i < allCriteria.length; i++) {
            var phrase = allCriteria[i].toLowerCase().trim();
            if (phrase.length && normalizedResume.indexOf(phrase) !== -1) matched++;
          }
          var pct = Math.round((matched / allCriteria.length) * 100);
          return { id: idx + 1, title: job.title, department: job.department, location: job.location, matchPct: pct };
        });
        scored.sort(function (a, b) { return b.matchPct - a.matchPct; });
        return { best: scored.filter(function (j) { return j.matchPct >= 70; }), other: scored.filter(function (j) { return j.matchPct < 70; }) };
      }

      function renderJobMatches(container, matches) {
        container.innerHTML = '';
        if (matches.best && matches.best.length) {
          var h3Best = document.createElement('h3');
          h3Best.textContent = 'Best matches (70%+)';
          container.appendChild(h3Best);
          var ulBest = document.createElement('ul');
          ulBest.className = 'job-matches-list best-matches';
          matches.best.forEach(function (j) {
            var li = document.createElement('li');
            var titleLink = document.createElement('a');
            titleLink.href = 'job-detail.html?id=' + (j.id || '');
            titleLink.className = 'job-title job-title-link';
            titleLink.textContent = j.title;
            var pctSpan = document.createElement('span');
            pctSpan.className = 'job-pct';
            pctSpan.textContent = j.matchPct + '%';
            li.appendChild(titleLink);
            li.appendChild(pctSpan);
            var likeBtn = document.createElement('button');
            likeBtn.type = 'button';
            likeBtn.className = 'job-like-btn' + (window.isJobLiked && window.isJobLiked(j) ? ' liked' : '');
            likeBtn.textContent = window.isJobLiked && window.isJobLiked(j) ? 'Liked' : 'Like';
            likeBtn.addEventListener('click', function (e) { e.preventDefault(); if (window.toggleJobLike) window.toggleJobLike(j); });
            li.appendChild(likeBtn);
            var meta = document.createElement('div');
            meta.className = 'job-meta';
            meta.textContent = (j.department || '') + ' ¬∑ ' + (j.location || '');
            li.appendChild(meta);
            ulBest.appendChild(li);
          });
          container.appendChild(ulBest);
        }
        if (matches.other && matches.other.length) {
          var h3Other = document.createElement('h3');
          h3Other.textContent = 'Listed jobs';
          container.appendChild(h3Other);
          var ulOther = document.createElement('ul');
          ulOther.className = 'job-matches-list other-jobs';
          matches.other.forEach(function (j) {
            var li = document.createElement('li');
            var titleLink = document.createElement('a');
            titleLink.href = 'job-detail.html?id=' + (j.id || '');
            titleLink.className = 'job-title job-title-link';
            titleLink.textContent = j.title;
            var pctSpan = document.createElement('span');
            pctSpan.className = 'job-pct';
            pctSpan.textContent = j.matchPct + '%';
            li.appendChild(titleLink);
            li.appendChild(pctSpan);
            var likeBtn = document.createElement('button');
            likeBtn.type = 'button';
            likeBtn.className = 'job-like-btn' + (window.isJobLiked && window.isJobLiked(j) ? ' liked' : '');
            likeBtn.textContent = window.isJobLiked && window.isJobLiked(j) ? 'Liked' : 'Like';
            likeBtn.addEventListener('click', function (e) { e.preventDefault(); if (window.toggleJobLike) window.toggleJobLike(j); });
            li.appendChild(likeBtn);
            var meta = document.createElement('div');
            meta.className = 'job-meta';
            meta.textContent = (j.department || '') + ' ¬∑ ' + (j.location || '');
            li.appendChild(meta);
            ulOther.appendChild(li);
          });
          container.appendChild(ulOther);
        }
      }

      function scanResumeSections(text) {
        var normalized = '\n' + (text || '').replace(/\r\n/g, '\n').replace(/\r/g, '\n').toLowerCase();
        return SECTION_DEFS.map(function (def) {
          var found = false;
          var matchedKeyword = null;
          for (var k = 0; k < def.keywords.length; k++) {
            var kw = def.keywords[k].toLowerCase();
            var asHeader = '\n' + kw;
            var withColon = '\n' + kw + ':';
            if (normalized.indexOf(asHeader) !== -1 || normalized.indexOf(withColon) !== -1 || normalized.indexOf(kw) !== -1) {
              found = true;
              matchedKeyword = def.keywords[k];
              break;
            }
          }
          return { id: def.id, label: def.label, found: found, matchedKeyword: matchedKeyword };
        });
      }

      function renderScanResults(container, found) {
        container.innerHTML = '';
        var h3 = document.createElement('h3');
        h3.textContent = 'Sections detected by AI';
        container.appendChild(h3);
        var ul = document.createElement('ul');
        ul.className = 'resume-section-list';
        found.forEach(function (item) {
          var li = document.createElement('li');
          li.className = item.found ? 'found' : 'missing';
          var dot = document.createElement('span');
          dot.className = 'section-dot';
          li.appendChild(dot);
          var label = document.createElement('span');
          label.textContent = item.found ? (item.label + (item.matchedKeyword ? ' (‚Äú' + item.matchedKeyword + '‚Äù)' : '')) : item.label + ' (not detected)';
          li.appendChild(label);
          ul.appendChild(li);
        });
        container.appendChild(ul);
      }
    })();

    function initChat() {
      var AUTO_OPEN_KEY = 'mmChatAutoOpened';
      var panel = document.getElementById('chat-panel');
      var toggle = document.getElementById('chat-toggle');
      var closeBtn = document.getElementById('chat-close');
      var messagesEl = document.getElementById('chat-messages');
      var inputEl = document.getElementById('chat-input');
      var sendBtn = document.getElementById('chat-send');
      if (!panel || !toggle) return;

      function openPanel() {
        panel.classList.add('open');
        if (inputEl) inputEl.focus();
      }
      function closePanel() {
        panel.classList.remove('open');
      }

      toggle.addEventListener('click', function() {
        if (panel.classList.contains('open')) closePanel();
        else openPanel();
      });
      if (closeBtn) closeBtn.addEventListener('click', closePanel);

      function addMsg(text, isBot) {
        if (!messagesEl) return;
        var div = document.createElement('div');
        div.className = 'chat-msg ' + (isBot ? 'bot' : 'user');
        div.textContent = text;
        messagesEl.appendChild(div);
        messagesEl.scrollTop = messagesEl.scrollHeight;
      }

      function getBotReply(userText) {
        var t = (userText || '').toLowerCase().trim();
        if (!t) return "Type a question and I'll try to help.";
        if (/hello|hi|hey|howdy|good morning|good afternoon|good evening/.test(t)) return "Hi! Ask me about this career site ‚Äî resume upload, job matches, the employer dashboard, or how we use your data.";
        if (/where do i upload|where can i upload|upload my resume|where to upload/.test(t)) return "Go to the Prospective employee section (click \"I'm a prospective employee\" on the home page), then choose \"Upload Resume.\" You can paste text or upload a PDF or .txt file.";
        if (/can i paste|paste my resume|paste resume|paste text/.test(t)) return "Yes. In the Upload Resume section there's a text area where you can paste your resume content. We accept pasted text, PDF, or .txt files.";
        if (/what file|file format|file type|pdf|\.txt/.test(t)) return "We accept PDF and plain text (.txt) files, or you can paste your resume directly into the text box. We extract or use the text for matching only ‚Äî we don't store the original file.";
        if (/what do you use from my resume|use my resume|resume analysis|analyze my resume/.test(t)) return "We use skills, experience, and qualifications from your resume. We remove PII (name, contact, location, school names, dates, race, gender, etc.) so matching is bias-free. Only job-relevant content is used.";
        if (/remove|strip|redact|pii|personal information/.test(t)) return "We strip out name, email, phone, address, school names, graduation dates, race, gender, age, and similar details before matching. That helps keep recommendations fair and skills-based.";
        if (/how do i get job matches|get matches|see recommendations|job recommendations/.test(t)) return "Upload your resume and complete the Personalized Questions. Then you'll see job recommendations. Your top matches also appear on the AI Decision Breakdown page (with a pie breakdown per job).";
        if (/top 3|top three|best matches/.test(t)) return "Your top three job matches are shown on the AI Decision Breakdown page. Each has an overall match % and a pie chart showing how Skills, Experience, and Fit & preferences contributed. Upload a resume and complete your profile to see them.";
        if (/liked jobs|save jobs|bookmark|favorite jobs/.test(t)) return "You can save jobs you like ‚Äî look for the option to \"like\" or save a job from the job recommendations. Liked jobs are listed under \"Liked jobs\" in the Prospective employee section.";
        if (/how do i apply|apply for|application process|submit application/.test(t)) return "This tool is for matching and transparency. Applying for a specific role would happen through Moultrie Mobile's normal hiring process (e.g. job posting or HR). Use your match results and the AI breakdown to prepare.";
        if (/employer dashboard|employer view|hiring manager/.test(t)) return "Click \"I'm an employer\" on the home page, then \"Open employer dashboard.\" You'll only see candidates who opted in to be visible to employers. You can filter by job type.";
        if (/who can see me|employers see|visible to employer|opt in|opt.in/.test(t)) return "By default you're not visible to employers. If you opt in (e.g. on the Personalized Questions flow when you choose to be visible), your name, contact, role, and match info can be seen on the Employer dashboard.";
        if (/personalized questions|personalized form|questions form/.test(t)) return "The Personalized Questions step lets you share how you like to work, your preferences, and what you value. Your answers help us weight matches ‚Äî more resume-based or more fit-based. You can update them later.";
        if (/change my answers|update answers|edit my preferences|change preferences/.test(t)) return "You can go back to the Personalized Questions page and submit again to update your answers. Your new answers will be used for future matching.";
        if (/weight|weigh|resume vs|experience vs|preferences vs/.test(t)) return "On the AI Decision Breakdown page you can choose: \"Resume & hard skills\" (we lean more on experience and skills) or \"My answers & preferences\" (we lean more on fit and what you said you want). The first three bar charts show how that affects the breakdown.";
        if (/ai breakdown|decision breakdown|why did you recommend|why this job/.test(t)) return "The AI Decision Breakdown page shows how we build your match: (1) how much resume vs preferences count, (2) factor contribution (skills, experience, working style, goals), (3) decision score breakdown. Your top 3 jobs appear there with a pie chart per job (skills, experience, fit).";
        if (/pie chart|pie graph|charts|graphs/.test(t)) return "On the AI Decision Breakdown page, your top 3 job matches each have a pie chart showing how Skills, Experience, and Fit & preferences make up that job's score. The first three sections on that page use bar charts to show how we weight your inputs.";
        if (/privacy|my data|keep my data|store my data/.test(t)) return "By default we don't keep your data; when you leave we forget it. If you opt in to save progress, we may store it. We're transparent about what we use for matching and what we remove (PII).";
        if (/delete my data|remove my data|forget my data/.test(t)) return "By default we don't persist your data after you leave. If you've opted in to save progress, clearing site data or not saving in the future stops new storage. For exact deletion steps, check with your IT or the team that runs this tool.";
        if (/bias|fair|fairness|unbiased|discrimination/.test(t)) return "We reduce bias by stripping name, location, school, dates, race, gender, and similar info from resumes before matching. Only skills and qualifications are used. The AI Decision Breakdown shows why each role was recommended so it's transparent.";
        if (/about moultrie|about the company|who is moultrie|what does moultrie do/.test(t)) return "Moultrie Mobile makes trail cameras and hunting/scouting tools. This career site is our internal AI dashboard for employees and hiring managers ‚Äî not the public. See the About page for more on our history and products.";
        if (/internal|public|who is this for/.test(t)) return "This is Moultrie Mobile's internal career match tool for employees and hiring managers. It's not the public job site. It helps match people to roles and explains how the AI recommendations work.";
        if (/training|courses|learning|development/.test(t)) return "There's a \"Training & Courses Match\" option in the Prospective employee section that can connect you to relevant learning. Check that section for how it uses your profile.";
        if (/contact|support|help me|talk to someone|human/.test(t)) return "I'm the in-page assistant. For HR, hiring, or technical support, use your usual internal channels (e.g. HR contact, IT, or the team that runs this dashboard).";
        if (/salary|pay|compensation|benefits/.test(t)) return "This tool focuses on role matching and transparency, not salary or benefits details. Those would come from the specific job posting or HR when you apply.";
        if (/remote|hybrid|location|work from home|onsite/.test(t)) return "You can indicate work mode (remote, hybrid, in-person, flexible) in the Personalized Questions. We use that to improve fit. Specific job locations and arrangements are in the role details when you look at recommendations.";
        if (/how long|how soon|when will i see|timing/.test(t)) return "After you upload your resume and complete the Personalized Questions, recommendations and the AI breakdown update quickly. You can open the AI Decision Breakdown and Liked jobs right away to see your top matches.";
        if (/what roles|what jobs|types of jobs|kinds of roles/.test(t)) return "The roles we suggest depend on your resume and answers. There‚Äôs no fixed list here ‚Äî the AI matches you to roles that fit your skills, experience, and preferences. Check the job recommendations and AI breakdown after you complete your profile.";
        if (/internship|intern|part time|part-time|full time|full-time|contract/.test(t)) return "You can indicate employment type (full-time, part-time, contract, flexible) in the Personalized Questions. We use that to weight matches. Available role types depend on what‚Äôs in the system.";
        if (/low score|improve my match|better match|why low/.test(t)) return "Match scores come from skills, experience, and fit. Updating your resume (skills, experience) and your Personalized Questions (preferences, work style) can improve matches. The AI Breakdown shows which factors drive each score so you can see what to emphasize.";
        if (/transparent|transparency|black box|explain/.test(t)) return "We're big on transparency. The AI Decision Breakdown page shows how we weight resume vs preferences, how each factor contributes, and for your top 3 jobs a pie chart of skills, experience, and fit. No hidden scoring.";
        if (/help|what can you|how do i start|where do i start/.test(t)) return "Start by choosing \"I'm a prospective employee\" on the home page, then: (1) Upload your resume, (2) Answer the Personalized Questions, (3) Check job recommendations and the AI Decision Breakdown. I can answer questions about any of those steps.";
        if (/resume|upload|paste|pdf/.test(t)) return "You can upload your resume from the \"Upload Resume\" option in the Prospective employee section. We accept PDF or pasted text. We strip out PII and bias-related info and only use skills and experience for matching.";
        if (/job|role|match|position|openings/.test(t)) return "After you upload a resume and answer the personalized questions, you'll see job recommendations. Use \"AI Decision Breakdown\" to see why each role was suggested (including pie charts per job). You can also browse \"Liked jobs\" if you've saved any.";
        if (/employer|hire|hiring|manager|candidate/.test(t)) return "Employers and hiring managers can use the \"Employer\" path on the home page, then open the Employer dashboard. You'll only see candidates who chose to make their profile visible to employers.";
        if (/personalized|questions|survey|form/.test(t)) return "The \"Personalized Questions\" step lets you share how you like to work and what you value. Your answers help us weight matches ‚Äî more experience-based or more values-based. You can change this later.";
        if (/about|moultrie|company|what is this/.test(t)) return "This is Moultrie Mobile's internal AI career dashboard ‚Äî for employees and hiring managers, not the public. Check the About page for more on who we are and our products.";
        return "I'm not sure about that. Try asking about resume upload, job matches, the employer dashboard, personalized questions, privacy, or the AI breakdown. You can also use the nav to jump to Upload Resume, AI Decision Breakdown, or About.";
      }

      function sendMessage() {
        var text = (inputEl && inputEl.value || '').trim();
        if (!text) return;
        if (inputEl) inputEl.value = '';
        addMsg(text, false);
        var reply = getBotReply(text);
        setTimeout(function() { addMsg(reply, true); }, 300);
      }

      if (sendBtn) sendBtn.addEventListener('click', function(e) { e.preventDefault(); sendMessage(); });
      if (inputEl) {
        inputEl.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') { e.preventDefault(); sendMessage(); }
        });
      }

      function maybeAutoOpen() {
        try {
          if (!sessionStorage.getItem(AUTO_OPEN_KEY)) {
            sessionStorage.setItem(AUTO_OPEN_KEY, '1');
            openPanel();
          }
        } catch (err) {}
      }
      if (document.readyState === 'complete') setTimeout(maybeAutoOpen, 100);
      else window.addEventListener('load', maybeAutoOpen);
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initChat);
    } else {
      initChat();
    }

    document.getElementById('personalized-form')?.addEventListener('submit', function(e) {
      e.preventDefault();
      const data = new FormData(this);
      const out = {};
      for (const [k, v] of data.entries()) {
        if (!v) continue;
        if (out[k] === undefined) out[k] = v;
        else out[k] = [].concat(out[k], v);
      }
      try {
        localStorage.setItem('moultrie_personalized', JSON.stringify(out));
        localStorage.setItem('moultrie_personalized_at', new Date().toISOString());
      } catch (err) { console.warn('Could not save to localStorage:', err); }
      alert('Thanks! Your answers have been saved. They\'ll be used when we analyze which roles suit you best.');
    });

    // (Removed) Extra bias-free resume upload flow used by #upload-resume-paste
  </script>
</body>
</html>
